<div class="outward-main-card shadow-lg p-4 rounded-4 mt-4">

  <div class="row g-0">

    <!-- LEFT BLUE SIDEBAR (compact width) -->
    <div class="col-auto stepper-sidebar p-3 text-white">
      <h6 class="text-center mb-3">Outward Wizard</h6>

      <ul class="list-unstyled mt-3">
        <li *ngFor="let s of steps"
            [class.active]="step===s.num"
            [class.completed]="completedSteps.has(s.num)"
            (click)="goToStep(s.num)">
          
          <div class="circle">
            <mat-icon *ngIf="completedSteps.has(s.num)">check</mat-icon>
            <span *ngIf="!completedSteps.has(s.num)">{{ s.num }}</span>
          </div>

          <span class="step-label">{{ s.label }}</span>
        </li>
      </ul>
    </div>

    <!-- RIGHT CONTENT -->
    <div class="col p-4">

      <!-- STEP 1 -->
      <mat-card *ngIf="step===1" class="inner-card">
        <h5 class="text-primary mb-3">Select Account</h5>

        <mat-form-field appearance="outline" class="w-100">
          <mat-label>Select Account</mat-label>
          <mat-select [(ngModel)]="selectedAccount" (selectionChange)="showAccountDetails(selectedAccount)">
            <mat-option *ngFor="let a of accounts" [value]="a">
              {{ a.accountNumber }} — {{ a.product }} (₹{{ a.balance | number }})
            </mat-option>
          </mat-select>
        </mat-form-field>

        <mat-card *ngIf="accountDetails" class="account-details mt-3 p-3">
          <div class="row g-3">
            <div class="col-md-6">
              <div><strong>Account Number:</strong> {{ accountDetails.accountNumber }}</div>
              <div><strong>CIF:</strong> {{ accountDetails.cif }}</div>
              <div><strong>IFSC:</strong> {{ accountDetails.ifsc }}</div>
            </div>
            <div class="col-md-6">
              <div><strong>Branch:</strong> {{ accountDetails.branch }}</div>
              <div><strong>Product:</strong> {{ accountDetails.product }}</div>
              <div><strong>Balance:</strong> ₹{{ accountDetails.balance }}</div>
            </div>
          </div>
        </mat-card>

        <div class="text-end mt-3">
          <button mat-flat-button color="primary" (click)="next()" [disabled]="!selectedAccount">Next</button>
        </div>
      </mat-card>

      <!-- STEP 2 -->
      <mat-card *ngIf="step===2" class="inner-card">
        <h5 class="text-primary mb-3">Transaction Details</h5>

        <!-- Insert your tabs, beneficiary, FTC, FCNB, Cash here -->

        <div class="d-flex justify-content-between mt-4">
          <button mat-flat-button (click)="prev()">Previous</button>
          <button mat-flat-button color="primary" (click)="next()">Next</button>
        </div>
      </mat-card>

      <!-- STEP 3 -->
      <mat-card *ngIf="step===3" class="inner-card">
        <h5 class="text-primary mb-3">Review & Confirm</h5>
        <pre class="bg-light p-3 rounded">{{ calculation | json }}</pre>

        <div class="d-flex justify-content-between mt-4">
          <button mat-flat-button (click)="prev()">Previous</button>
          <button mat-flat-button color="primary" (click)="submit()">Submit</button>
        </div>
      </mat-card>

    </div>
  </div>
</div>
